<hr class="hr-slash"/>
<div id="utterances"></div>
<noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    try {
      {{ $owner:= .Site.Params.utterances.owner }}
      var owner = JSON.parse({{ $owner | jsonify }});
      {{ $repo:= .Site.Params.utterances.repo }}
      var repo = JSON.parse({{ $repo | jsonify }});
      var localTheme = localStorage.getItem('theme') == undefined ? 'dark' : localStorage.getItem('theme')
      var utterTheme = localTheme === "dark" || localTheme === "hacker" ? 'photon-dark' : localTheme === 'kimbie' ? 'github-dark-orange' : 'github-light'

      var myScript = document.createElement('script');
      myScript.setAttribute('src', 'https://utteranc.es/client.js');
      myScript.setAttribute('repo', `${owner}/${repo}`);
      myScript.setAttribute('issue-term', 'pathname');
      myScript.setAttribute('theme', utterTheme);
      myScript.setAttribute('crossorigin', 'anonymous');
      myScript.setAttribute('async', '');

      myScript.onload = function() {
      }

      var utterancesDiv = document.getElementById('utterances')
      utterancesDiv.insertBefore(myScript, utterancesDiv.firstChild);
    } catch (err) {
      console.log(err);
    }
  });
</script>

<div id="comments-fallback" class="viaemail">
    <div class="viaemail__no-comments-message">
        Don't want to use the Utterance bot? Comments can be also placed
        <a href="https://github.com/{{ .Site.Params.utterances.owner }}/{{ .Site.Params.utterances.repo }}/issues/{{ .Params.utterances_issue_id | default "" }}" target="_blank" rel="noreferrer">directly on GitHub</a>.
    </div>
</div>
